
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../local_development/">
      
      
        <link rel="next" href="../coding_guidelines/">
      
      
        
      
      
      <link rel="icon" href="../../gitlabform-logo-favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Implementation Design - GitLabForm</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#implementation-design" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="GitLabForm" class="md-header__button md-logo" aria-label="GitLabForm" data-md-component="logo">
      
  <img src="../../gitlabform-logo-favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            GitLabForm
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Implementation Design
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="cyan"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/gitlabform/gitlabform/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="GitLabForm" class="md-nav__button md-logo" aria-label="GitLabForm" data-md-component="logo">
      
  <img src="../../gitlabform-logo-favicon.png" alt="logo">

    </a>
    GitLabForm
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/gitlabform/gitlabform/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    üèó GitLabForm
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ‚ú® Features
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../requirements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ü´¥ Requirements
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    üíæ Installation
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    üìã Configuration
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    üìã Configuration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/archive_unarchive/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Archive/unarchive
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/avatar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Avatar
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/badges/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Badges
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/protected_branches/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Branches
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/ci_cd_variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CI/CD Variables
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/job_token_scope/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CI/CD Job Token Scope
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/deploy_keys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deploy Keys
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Files
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/group_ldap_links/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Group LDAP links
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/group_saml_links/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Group SAML links
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/integrations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Integrations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/labels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Labels
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/members/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Members
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/merge_requests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Merge Requests
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/pipeline_schedules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pipeline schedules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/project_security_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Project security settings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/protected_environments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Protected environments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/push_mirrors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Push mirrors
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/push_rules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Push rules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/resource_groups/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Resource groups
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Settings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/tags_protection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tags protection
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/project_transfer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Transfer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/webhooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Webhooks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../running/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    üèÉ Running
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ü§ñ Automation
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    üóì Changelog
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ‚è´ Upgrading
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    üôã Contributing
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_10" id="__nav_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    üôã Contributing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../local_development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Local Development
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Implementation Design
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Implementation Design
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#calling-gitlab-rest-apis" class="md-nav__link">
    <span class="md-ellipsis">
      
        Calling GitLab REST APIs
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Project Structure
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Project Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#packages-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Packages overview
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-pattern-multiple-inheritance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common pattern - multiple inheritance
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common pattern - multiple inheritance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gitlabform-gitlabformlists-and-gitlabformprocessors" class="md-nav__link">
    <span class="md-ellipsis">
      
        gitlabform., gitlabform.lists. and gitlabform.processors.*
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="gitlabform., gitlabform.lists. and gitlabform.processors.*">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitlabformgitlab" class="md-nav__link">
    <span class="md-ellipsis">
      
        gitlabform.gitlab.*
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="gitlabform.gitlab.*">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitlabformconfiguration" class="md-nav__link">
    <span class="md-ellipsis">
      
        gitlabform.configuration.*
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../coding_guidelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Coding Guidelines
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../releases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Releases
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../similar_apps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ‚öñÔ∏è Similar Apps
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#calling-gitlab-rest-apis" class="md-nav__link">
    <span class="md-ellipsis">
      
        Calling GitLab REST APIs
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Project Structure
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Project Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#packages-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Packages overview
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-pattern-multiple-inheritance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common pattern - multiple inheritance
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common pattern - multiple inheritance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gitlabform-gitlabformlists-and-gitlabformprocessors" class="md-nav__link">
    <span class="md-ellipsis">
      
        gitlabform., gitlabform.lists. and gitlabform.processors.*
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="gitlabform., gitlabform.lists. and gitlabform.processors.*">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitlabformgitlab" class="md-nav__link">
    <span class="md-ellipsis">
      
        gitlabform.gitlab.*
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="gitlabform.gitlab.*">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitlabformconfiguration" class="md-nav__link">
    <span class="md-ellipsis">
      
        gitlabform.configuration.*
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="implementation-design">Implementation design<a class="headerlink" href="#implementation-design" title="Permanent link">&para;</a></h1>
<p>If you haven't done this before, please read the <a href="../../reference/">configuration introduction</a> article first.</p>
<p>It explains the "<strong>why</strong>"s of the two key design concepts of this app:</p>
<ul>
<li>hierarchical configuration with inheritance, merging/overwriting and additivity,</li>
<li>raw parameters passing</li>
</ul>
<p>Please also read the general <a href="../coding_guidelines/">coding guidelines</a> for the basics of how to create PRs,
the expected style of your code etc. - the "<strong>general how</strong>"s.</p>
<p>This article purpose is to explain "<strong>specific how</strong>"s - explain what is where in the code and how to add features
by example.</p>
<h2 id="calling-gitlab-rest-apis">Calling GitLab REST APIs<a class="headerlink" href="#calling-gitlab-rest-apis" title="Permanent link">&para;</a></h2>
<p>We prefer to call GitLab's REST APIs using <a href="https://python-gitlab.readthedocs.io/en/stable/"><code>python-gitlab</code></a> rather than creating our own REST implementations.</p>
<p>A python_gitlab instance <code>./gitlabform/gitlab/python_gitlab.py</code> is provided on <code>AbstractProcessor</code>, extending the base functionality to add convenience methods and caching to common GET requests. It will not always be appropriate to call a <code>_cached</code> method, as you will require the updated instance of a given Object after performing CRUD operations upon it. </p>
<h2 id="project-structure">Project Structure<a class="headerlink" href="#project-structure" title="Permanent link">&para;</a></h2>
<h3 id="packages-overview">Packages overview<a class="headerlink" href="#packages-overview" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>gitlabform.*</code>, <code>gitlabform.lists.*</code> and <code>gitlabform.processors.*</code> - these contain the main app logic.
  They provide the CLI, parsing of the parameters (<code>gitlabform.*</code>), getting the input lists of groups and projects
  to process and omitting unneeded ones to get the effective lists (<code>gitlabform.lists.*</code>) and finally processors
  are used to apply the groups and projects configurations in GitLab,</p>
</li>
<li>
<p><code>gitlabform.gitlab.*</code> - contains the GitLab API client code, grouped mostly by the GitLab API 
  <a href="https://docs.gitlab.com/ee/api/api_resources.html">as documented at docs.gitlab.com</a>.</p>
</li>
<li>
<p><code>gitlabform.configuration.*</code> - contains the logic for reading the config from YAML file or a string
  (the latter is only for testing) and getting an effective config per GitLab project by merging
  the config on these levels: common, group and project settings.</p>
</li>
</ul>
<p>Please see the below doc sections for more info about these packages.</p>
<h2 id="common-pattern-multiple-inheritance">Common pattern - multiple inheritance<a class="headerlink" href="#common-pattern-multiple-inheritance" title="Permanent link">&para;</a></h2>
<p>In many of the above packages we are using <em>multiple inheritance</em>.</p>
<p>The basic features are often implemented in the "core" class defined in <code>core.py</code>. Extensions to it are defined in all other
files as "feature" classes that inherit the "core". Finally, there is an "everything" class that groups them all - it is
defined in the <code>__init__.py</code> file.</p>
<h3 id="gitlabform-gitlabformlists-and-gitlabformprocessors">gitlabform.<em>, gitlabform.lists.</em> and gitlabform.processors.*<a class="headerlink" href="#gitlabform-gitlabformlists-and-gitlabformprocessors" title="Permanent link">&para;</a></h3>
<p>The entry point for running the app is in <code>run.py</code> and the main logic is in the <code>GitLabForm</code> class.</p>
<p>This code boils down to the <code>run()</code> method, which for each project that according to the app parameters
and config should be taken into account, applies the effective config.</p>
<p>The code in <code>gitlabform.lists.*</code> is used to generate the input lists of groups and projects, omit the ones that can and should be omitted for saving the processing time (f.e. archived projects, groups and projects with empty effective config) and this way generate the effective lists of groups and projects.</p>
<p>The effective config for these contain what is called the "config sections", which are the YAML keys that can exist under projects
in the config YAML, for example: <code>deploy_keys</code>, <code>variables</code>, <code>group_variables</code> and so on.</p>
<p>Those config sections are processed by the code in the classes inheriting from the <code>AbstractProcessor</code> class. This class
should be reused when implementing new functionalities (such as supporting new configuration keys) as it holds the common 
logic for skipping the configuration parts and running in dry-run mode. The processors have been grouped into two 
packages - <code>group</code> where the processors applied to the group settings are implemented and <code>project</code> - where processors
executed on the project level are located.</p>
<p>Since v2.2.0 there is a new way of implementing processors - by inheriting form <code>MultipleEntitiesProcessor</code> class.
It should be applied for new features which manage 0-N entities of some kind under a group or a project.
See <code>BadgesProcessor</code> as an example how to use it.</p>
<p>Since v2.10.0 we have a similar solution for features where you manage a single entity - <code>SingleEntityProcessor</code> class.
See <code>ProjectPushRulesProcessor</code> as an example how to use it. </p>
<h4 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h4>
<p>If you want to <strong>add/change/fix things under an existing config section</strong> then most likely you will need to update 
the code in the processor classes (for example, in <code>BranchesProcessor</code>).</p>
<p>If you want to <strong>add support for a new config section</strong> (= completely new feature), then you need to:</p>
<ol>
<li>(TODO: expand this sections) Consider writing a new processor using <code>MultipleEntitiesProcessor</code> or <code>SingleEntityProcessor</code> class as a base.</li>
<li>Create a new class <code>group_&lt;new_config_section_name&gt;_processor</code> (if it applies to the group settings) or 
<code>&lt;new_config_section_name&gt;_processor</code> (if it applies to project settings) and implement two methods:<ul>
<li><code>_process_configuration</code> - which does the actual processing by calling the API and applying the changes in GitLab;</li>
<li><code>_log_changes</code> - which is optional but recommended to implement; by calling this method the effective changes 
to be applied should be logged (when running in dry-run mode). </li>
</ul>
</li>
<li>Add the new processor to <code>GroupProcessors</code> in <code>group &gt; __init__.py</code> (if group settings processor was created) or 
to <code>ProjectProcessors</code> in <code>project &gt; __init__.py</code>. </li>
</ol>
<h3 id="gitlabformgitlab">gitlabform.gitlab.*<a class="headerlink" href="#gitlabformgitlab" title="Permanent link">&para;</a></h3>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>We have decided to move away from our own homegrown GitLab API client to the <code>python-gitlab</code> library. (See <a href="https://github.com/gitlabform/gitlabform/issues/73">issue #73</a> for info.) Therefore, you should <strong>NOT</strong> add any more code to this package!</p>
</div>
<p>With the basics for making requests to the GitLab API covered in the <code>GitLabCore</code> class in <code>core.py</code>, all other code
is simple (most of the time).</p>
<p>Almost all methods in other classes end up calling <code>self._make_requests_to_api</code>, which takes care of making the HTTP
GitLab API requests with proper authentication, pagination, retries, timeouts and more.</p>
<p>Sometimes there is some logic in these methods if:</p>
<ul>
<li>we only need a specific part of the response from GitLab API - see <code>GitLabProjects.get_all_projects()</code> as an example,</li>
<li>some GitLab APIs need some workarounds for their bugs or documentation inconsistencies, like:<ul>
<li>some APIs declare in the docs that they accept both "group/project" string OR a project id while in fact only the latter works - see <code>GitLabProjects.post_approvals()</code> as an example,</li>
<li>some APIs return invalid HTTP error codes, like 404 instead of 400 - see <code>GitLabGroupLDAPLinks.add_ldap_group_link</code> as an example.</li>
</ul>
</li>
</ul>
<p><strong>Note</strong>: Some of the code here is <strong>NOT used by the GitLabForm app</strong>, but utilized by internal Egnyte
applications that have not (yet) switched to the more standard <code>python-gitlab</code>.</p>
<h4 id="usage_1">Usage<a class="headerlink" href="#usage_1" title="Permanent link">&para;</a></h4>
<p>If you want to <strong>add/change/fix code that operates on an existing GitLab API</strong> you should look around 
the "feature" classes in this package (for example <code>GitLabMergeRequests</code> in <code>merge_requests.py</code>).</p>
<p>If you want to <strong>add code that operates on the new GitLab API</strong> you should:</p>
<ol>
<li>create a new <code>new_gitlab_api_name.py</code> file in <code>gitlabform.gitlab</code> and define a "feature" class there
   that inherits <code>GitLabCore</code> (for example: <code>GitLabApiName</code>).</li>
<li>add the new feature class to the list of classes inherited by the "everything" <code>GitLab</code> class
   defined in <code>__init__.py</code>. </li>
</ol>
<h3 id="gitlabformconfiguration">gitlabform.configuration.*<a class="headerlink" href="#gitlabformconfiguration" title="Permanent link">&para;</a></h3>
<p>The core code in this package contains some share code, which apart from the rather obvious things like parsing the input YAML, getting the value from a specific subkey and merging configs, contains also:</p>
<ul>
<li>code for breaking configuration inheritance using <code>inherit: false</code>,</li>
<li>dealing with groups and project names in GitLab being de facto case-insensitive (you can change case of such entities name, but you cannot have 2 which names differ only in case) (see "almost duplicates" in the code),</li>
</ul>
<p>The class inheritance order in this package (core -&gt; common -&gt; groups -&gt; projects) is intentional, as common config affects groups configs and this in turn affects projects configs.</p>
<p>The effective configuration for a project may contain elements that are inherited from the common level and from the group level.</p>
<p>A separate module in this package, <code>transform.py</code>, contains code that does YAML-level transformation form allow a more user-friendly config syntax that is later replaced with a syntax required by GitLab API. An example of this can be accepting <code>user: &lt;username&gt;</code> in the input config syntax but internally transforming it into <code>user_id: &lt;id_number&gt;</code>.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.indexes"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>